<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>[BETA] Transit Map Maker</title>
    <link rel="stylesheet" href="stylev4.css">

    <link rel="icon" type="image/png" href="/img/favicon/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/svg+xml" href="/img/favicon/favicon.svg">
    <link rel="shortcut icon" href="/img/favicon/favicon.ico">
    <link rel="apple-touch-icon" sizes="180x180" href="/img/favicon/apple-touch-icon.png">
    <meta name="apple-mobile-web-app-title" content="Transit Map Maker">
    <link rel="manifest" href="/img/favicon/site.webmanifest">

    <meta property="og:title" content="Transit Map Maker">
    <meta property="og:type" content="website">
    <meta property="og:image" content="https://transitmap.madebybence.com/img/social.jpg">
    <meta property="og:description" content="A transit map maker for creating, editing and sharing transit maps, Made by Bence.">
    <meta property="og:site_name" content="Transit Map Maker">
</head>
<body>
    <header>
        <div class="brand">
            <h1>Transit Map Maker</h1>
            <button id="btn-changelog">BETA <span id="version-text"></span></button>
        </div>

        <div class="controls">
            <button id="zoomOut" title="Zoom out">−</button>
            <button id="zoomIn" title="Zoom in">+</button>
            
            <label><input type="checkbox" id="toggleShowLegend" checked> Legend</label>

            <label class="import-label">
                Import JSON
                <input type="file" class="import-json" accept="application/json" hidden>
            </label>
            <button id="export-json-btn">Export JSON</button>
            <button id="export-png-btn">Export PNG</button>
            <button id="share-btn">Share</button>
        </div>
    </header>

    <main>
          <aside>
          <section>
            <label><input type="checkbox" id="toggleAddStation"> Add station (click on map)</label>
            <button id="btn-addline">+ Add line</button>
          </section>
          <section>
              <details>
                  <summary>Edit lines</summary>
                  <ul id="line-list"></ul>
                  
              </details>
          </section>
          <section>
              <details>
                  <summary>Edit stations</summary>
                  <ul id="station-list"></ul>
              </details>
          </section>
          <section>
              <details>
                  <summary>Legend</summary>
                  <ul id="controls-legend-list"></ul>
              </details>
          </section>
          <section>
              <details>
                  <summary>Map</summary>
                  <button id="mapWidthMin">-</button> width <button id="mapWidthPlus">+</button><br>
                  <button id="mapHeightMin">-</button> height <button id="mapHeightPlus">+</button>
                  <button id="btn-clearall">Clear whole map</button>
              </details>
          </section>
          <section>
            <details>
              <summary>View settings</summary>
                <label><input type="checkbox" id="toggleShowGridLines" checked> Show Grid</label><br>
                <label><input type="checkbox" id="toggleShowCoordinates"> Show coordinates</label><br>
                <label><input type="checkbox" id="toggleShowStationNames" checked> Show station names</label>
            </details>
          </section>
          <section>
              <h3>Examples</h3>
              <button id="intro-option-2">Load Amsterdam</button>
              <button id="intro-option-3">Load Budapest</button>
          </section>
          <section style="padding: 2rem; text-align: center">
            This is a beta version of TMM. <a href="index.html" style="color:white;">Return to stable version here.</a>
          </section>
          </aside>

          <section class="stage-wrap">
          <!-- Dynamisch SVG canvas -->
          <div class="svg-wrap">
              <svg id="map" xmlns="http://www.w3.org/2000/svg" aria-label="Transit map">
              <g id="layer-grid"></g>
              <g id="layer-lines"></g>
              <g id="layer-stations"></g>
              <g id="layer-labels"></g>
              </svg>
          </div>
          </section>

          <section id="legend">
              <ul id="legend-list"></ul><br>
              <ul id="legend-station-list"></ul>
          </section>
    </main>

    <!-- Station popup -->
    <div id="station-popup" class="popup hidden">
      <div class="popup-inner">
        <h3>Edit station</h3>
        <label>Name <input id="station-name-input" type="text"></label>
        <label>Type
          <select id="station-type-input">
            <option value="1">Station</option>
            <option value="2">Transfer station</option>
            <option value="3">Train station</option>
            <option value="4">Large train station</option>
          </select>
        </label>
        <label>X <input id="station-x-input" type="number"></label>
        <label>Y <input id="station-y-input" type="number"></label>
        <div class="popup-actions">
          <button id="btn-savestationedits">Save</button>
          <button id="btn-deletestation" class="danger">Delete</button>
          <button id="btn-closepopup" class="closepopup">×</button>
        </div>
      </div>
    </div>

    <!-- Line popup -->
    <div id="line-popup" class="popup hidden">
        <div class="popup-inner">
            <h3>Edit line</h3>
            <label>Name <input id="line-name-input" type="text"></label>
            <label>Color <input id="line-color-input" type="color"></label>
            <label>Style
                <select id="line-style-input">
                  <option value="solid">Solid</option>
                  <option value="dash">Dash</option>
                  <option value="dot">Dot</option>
                </select>
            </label>
            <label>Width
                <select id="line-width-input">
                  <option value="thin">Thin</option>
                  <option value="normal" selected>Normal</option>
                  <option value="thick">Thick</option>
                </select>
            </label>

            <h4>Stations in line</h4>
            <table class="table-list">
              <tbody id="stationList"></tbody>
            </table>

            <div class="row">
              <select id="stationSelect"></select>
              <button id="btn-addstationtoline">Add to line</button>
            </div>

            <div class="popup-actions">
              <button id="btn-savelineedits">Save</button>
              <button id="btn-deleteline" class="danger">Delete line</button>
              <button id="btn-closelinepopup" class="closepopup">×</button>
            </div>
        </div>
    </div>

    <!-- Tutorial/Changelog mini-dialogs (optioneel zichtbaar) -->
    <div id="change-log-popup" class="popup hidden">
        <div class="popup-inner">
            <h3>Changelog</h3>
            <ul>
                <li>[BETA] v4.00.2 (14-08-2025)<br>UI fixes</li>
                <li>[BETA] v4.00.1 (14-08-2025)<br>UI fixes</li>
                <li>[BETA] v4.00.0 (13-08-2025)<br>Complete fundamental update to make maps vector-based</li>
                <li>v3.20.0 (13-08-2025)<br>Complete restructuring of the codebase (shouldn't be any visible changes)</li>
                <li>v3.10.1 (09-07-2025)<br>New feature: line styles and width can now be changed (backwards compatible)</li>
                <li>v3.02.2<br>Slight correction to v3.02.1</li>
                <li>v3.02.1<br>Added a toggle for showing coordinates<br>Removed "show true grid lines" function<br>Added ability to create map URL<br>Made popup backdrop darker</li>
                <li>v3.01.1<br>Added autosave on close<br>Added data validation for JSON imports<br>System now removes deleted stations from line arrays<br>Changed export format from PNG to JPG</li>
                <li>v2.25.1<br>Added ability to edit station coordinates<br>Finished Budapest metro on welcome screen<br>Added ability to hide station names</li>
                <li>v2.24.2<br>Added a change log (yay!)<br>Fixed AMS metro import on welcome screen<br>Added (a part of) Budapest metro</li>
                <li>v2.24.1<br>Added a welcome screen<br>Better hover effects</li>
            </ul>
            <div class="popup-actions">
                <button id="btn-closechangelog" class="closepopup">×</button>
            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/pako/2.1.0/pako.min.js"></script>
    <script src="scriptv4.js" defer></script>
</body>
</html>